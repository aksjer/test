<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/5.3.0/Rx.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

  <style>
    html,
    body {
      background-color: #202020;
    }
    
    li {
      color: white;
    }
  </style>

</head>

<body>

  <input type="text" placeholder="City">
  <script>
    // (async () => {
    //   const a = async () => new Promise(resolve => setTimeout(() => resolve("#1"), 1500));
    //   const b = async () => new Promise(resolve => setTimeout(() => resolve("#2"), 1000));
    //   const c = async () => {
    //     await a().then(data => console.log(data));
    //     await b().then(data => console.log(data));
    //   }
    //   await c();
    //   console.log("#3");
    // })();

    // const a = Rx.Observable.create(subscriber => {
    //   subscriber.next("hello");
    //   subscriber.next("world");
    //   subscriber.complete();
    // })
    // const sub1 = a.subscribe(
    //   v => { console.log(v) },
    //   e => { console.log(e) },
    //   () => { console.log('complete') }
    // );

    // const a = new Rx.BehaviorSubject(undefined);
    // const subscription1 = a.subscribe(
    //   v => { console.log('sub1 : ' + v) },
    //   e => { console.log(e) },
    //   () => { console.log('complete') }
    // );
    // const subscription2 = a.subscribe(
    //   v => { console.log('sub2 : ' + v) },
    //   e => { console.log(e) },
    //   () => { console.log('complete') }
    // );
    // setTimeout(() => {
    //   a.next('Hello');
    // }, 2000);

    // const observer = ({
    //   next: e => console.log('next ' + e),
    //   error: err => console.error(err),
    //   complete: () => console.log('complete')
    // });

    // const observer = ({
    //   next: e => console.log('next ' + e),
    //   error: err => console.error(err),
    //   complete: () => console.log('complete')
    // });

    // const observable = new Rx.Observable(subscriber => {
    //   subscriber.next('sub1');
    // });
    // const subject = new Rx.Subject();

    // const sub1 = observable.subscribe(observer);
    // const sub2 = subject.subscribe(observer);

    // subject.next('sub2');

    // setTimeout(() => {
    //   subject.next('hello');
    // }, 5000);

    // const a = [2, 0, 3]
    // const b = [1, 2, 3]
    // const c = [0, 2, 3]
    // console.log(a == b, a === b, a > c, a < c);


    // const source = Rx.Observable.timer(0, 2500);
    // const example = source.switchMap(() => Rx.Observable.interval(500));
    // const subscribe = example.subscribe(val => console.log(val));


    const cities = ['Paris', 'New York', 'Tokyo', 'Istanbul', 'Londres', 'Mexico']
    const subject = new Rx.Subject();
    $('input').on('keyup', function (e) {
      subject.next(e.target.value);
    })
    const search = term => Rx.Observable.of(cities.filter(city => city.toLowerCase().indexOf(term.toLowerCase()) !== -1));
    const obs = subject
      .debounceTime(300)
      .distinctUntilChanged()
      .switchMap(term => term ? search(term) : Rx.Observable.of([]));
    obs.subscribe(data => console.log(data));
  </script>
</body>

</html>